# SPDX-FileCopyrightText: (C) 2025 Intel Corporation
#
# SPDX-License-Identifier: Apache-2.0

apiVersion: cluster.x-k8s.io/v1beta1
kind: Cluster
metadata:
  name: capd-k3s-test
  namespace: e2e-test
spec:
  controlPlaneRef:
    apiVersion: controlplane.cluster.x-k8s.io/v1beta1
    kind: KThreesControlPlane
    name: capd-k3s-test
  infrastructureRef:
    apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
    kind: DockerCluster
    name: capd-k3s-test
---
apiVersion: controlplane.cluster.x-k8s.io/v1beta1
kind: KThreesControlPlane
metadata:
  name: capd-k3s-test
  namespace: e2e-test
spec:
  version: v1.32.4+k3s1
  replicas: 1
  infrastructureTemplate:
    apiVersion: infrastructure.cluster.x-k8s.io/v1beta1
    kind: DockerMachineTemplate
    name: capd-k3s-test
  kthreesConfigSpec:
    files:
      - content: |
          #!/bin/bash
          set -e
          echo "Hello, World!"
        path: /etc/hello-world.sh
        owner: root:root
